<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="./reset.css">
    <link rel="stylesheet" href="./app.css" />
    <title>TabsScroll</title>
  </head>
  <body>
    <div class="wrapper">
      <h1>TabsScroll</h1>
      <div class="tabs tr_tab_nav"></div>
      <div class="contents">
        <div class="sec-tabs-wrap">
          <div id="sec-tabs-1" class="sec-tabs sec-tabs-1" data-tr="{fadeIn: 100}">
            <h1>tabs-1</h1>
          </div>
          <div id="sec-tabs-2" class="sec-tabs sec-tabs-2" data-tr="{fadeIn: 100}">
            <h1>tabs-2</h1>
          </div>
          <div id="sec-tabs-3" class="sec-tabs sec-tabs-3" data-tr="{fadeIn: 100}">
            <h1>tabs-3</h1>
          </div>
          <div id="sec-tabs-4" class="sec-tabs sec-tabs-4" data-tr="{fadeIn: 100}">
            <h1>tabs-4</h1>
          </div>
        </div>
      </div>
    </div>

    <script src="https://code.jquery.com/jquery-1.12.3.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.6.1/gsap.min.js"></script>
    <script src="../../../dist/actives.min.js"></script>
    <script>
      /**
            triplelab의 자원과, jquery의 자원을 이용해서 쉽고, 빠르게 UI를 완성할수 있습니다.
            You can easily and quickly complete UI by using triplelab resources and jquery resources. 
        */
      (function () {
        const scriptScroll=false;
        let scrollModeStart;
        let scrollModeEnd;
        let benefitScroll_1;
        let benefitScroll_2;
        let benefitScroll_3;
        let benefitScroll_4;
        const scrollNavHeight = 79;
        let st;

        const my = new tr.TabsScroll({
          targets: '.tr_tab_nav',
          addClassName: 'actives', // 넣고 싶은 클랙스 명
          menuName : ['Manu1', 'Manu2', 'Manu3', 'Manu4'],
          firstItemActive: false,
          tabLine: true
        });

        const scrollTop = function(ele) {
          const $this = $(ele),
                href = $this.attr("href");
                topY = $(href).offset().top - scrollNavHeight - 25;
           
          TweenMax.to(window, 1, {
              scrollTo:{
                  y: topY,
                  autoKill: false
              }, 
              ease:Power3.easeOut
          });
        };

        const onScroll = () => {
          const {addClassName} = my.el;
          st = $(document).scrollTop();
            // 특정 컨텐츠 상단, 하단의 기준
            // if( scrollModeStart < st && st < scrollModeEnd) {
            //     $('.tr_tab_nav').addClass(addClassName);
            // } else if( st < scrollModeStart || st > scrollModeEnd) {
            //     $('.tr_tab_nav').removeClass(addClassName);
            // }

            // 특정 스크롤 위치 기준
            if(window.scrollY > 30) {
              $('.tr_tab_nav').addClass(addClassName);
            } else {
              $('.tr_tab_nav').removeClass(addClassName);
            }
        }


        $(window).on('load', function(){
            scrollModeStart = $('.sec-tabs-wrap').offset().top;
            scrollModeEnd = scrollModeStart + $('.sec-tabs-wrap').height() - 300;

            benefitScroll_1 = Math.round($('#sec-tabs-1').offset().top) - scrollNavHeight - 3;
            benefitScroll_2 = Math.round($('#sec-tabs-2').offset().top) - scrollNavHeight - 3;
            benefitScroll_3 = Math.round($('#sec-tabs-3').offset().top) - scrollNavHeight - 3;
            benefitScroll_4 = Math.round($('#sec-tabs-4').offset().top) - scrollNavHeight - 3;    
        });

        $(window).on('scroll', onScroll)

        $('.tr_tab_inner').on('click', 'a', function(e){
          scrollTop(e.currentTarget);
        });  

        const {firstItemActive} = my.el;
        firstItemActive && scrollTop('.tr_tab_item:nth-child(1) a');
      })();
    </script>
  </body>
</html>
